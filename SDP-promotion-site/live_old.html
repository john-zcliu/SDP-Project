<div>
<script src="https://static.codepen.io/assets/editor/iframe/iframeRefreshCSS-e03f509ba0a671350b4b363ff105b2eb009850f34a2b4deaadaa63ed5d970b37.js"></script>
    <script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-157cd5b220a5c80d4ff8e0e70ac069bffd87a61252088146915e8726e5d9f147.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/TweenMax-latest-beta.js?v=333"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/MorphSVGPlugin.min.js?r=1899"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/findShapeIndex.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/Draggable-latest-alpha.js"></script>

   
    <style>
        .ani-wrapper { position: relative; display: block; margin: 20px auto; width:1000px; height:800px;  }
        .ani-canvas { position: absolute; height: auto; }
        .ani-recyclotron { height: auto; width: auto; position: absolute; top: 250px; left: 500px; z-index: 1000;}
        .ani-recyclotron img { height: 125px; width: auto; }
        .trash-img { height: 100px; width: auto; position: absolute; border: 0px solid white;}
        .trash-img-1 { top: 50px; left: 100px;}
        .trash-img-2 { top: 50px; left: 300px;}
        .trash-img-3 { top: 50px; left: 500px;}
        .trash-img-4 { top: 50px; left: 700px;}
        .trash-img-5 { top: 50px; left: 900px; height: 110px; width: 110px; }
        .trash-img-6 { top: 50px; left: 500px;}

        .ani-bin { height: 200px; width: auto; position: absolute; border: 0px solid white; z-index: 1000; }
        .ani-bin-1 { top: 400px; left: 100px;}
        .ani-bin-2 { top: 400px; left: 300px;}
        .ani-bin-3 { top: 400px; left: 555px;}
        .ani-bin-4 { top: 400px; left: 755px;}

        #replay { position: absolute; right: 50px; bottom: 50px; filter: invert(1); }
        #replay:active { filter: invert(0); }
        #replay img { height: 40px; width: auto; }
        #replay img:hover { height: 50px; width: auto; }

        .foot {
            height: 800px;
            background-color: antiquewhite;
        }
        .foot img {
            position: absolute;
            left: 0;
        }
    </style>
<div class="ani-wrapper">
          
        <div class="ani-recyclotron center-origin">
            <img src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/recyclotron.png">
        </div>

        <img id="dot1" class="ani-trash trash-img trash-img-1 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/paper.gif">
        <img id="dot2" class="ani-trash trash-img trash-img-2 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/can.gif">
        <img id="dot3" class="ani-trash trash-img trash-img-3 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/plastic.gif">
        <img id="dot4" class="ani-trash trash-img trash-img-4 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/glass.gif">
        <img id="dot5" class="ani-trash trash-img trash-img-5 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/trash.gif">
        <img id="dot6" class="ani-trash trash-img trash-img-6 center-origin" src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/cardboard.gif">
        
        <img id="bin2" class="ani-bin ani-bin-1 " src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/bin2.png">
        <img id="bin3" class="ani-bin ani-bin-2 " src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/bin3.png">
        <img id="bin4" class="ani-bin ani-bin-3 " src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/bin4.png">
        <img id="bin5" class="ani-bin ani-bin-4 " src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/bin5.png">
   
      
        <svg id="demo" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800">

            <rect id="background" width="1000" height="800" fill="#333"></rect>
        
            <circle id="dot1-origin" cx="10" cy="50" r="0" fill="yellow"></circle>
            <circle id="dot2-origin" cx="300" cy="50" r="0" fill="red"></circle>
            <circle id="dot3-origin" cx="500" cy="50" r="0" fill="grey"></circle>
            <circle id="dot4-origin" cx="700" cy="50" r="0" fill="blue"></circle>
            <circle id="dot5-origin" cx="900" cy="50" r="0" fill="green"></circle>
            
            
            <path id="theMotionPath1" d="M 100 50 C 100,200 500,50 500,200 L 500 300 C 500,450 175,220 175,400  l 0,50" stroke="yellow" stroke-width="0" fill="none"></path>
            <path id="theMotionPath2" d="M 300 50 C 400,200 500,100 500,200 L 500 300 C 500,390 375,300 375,400 l 0,50" stroke="red" stroke-width="0" fill="none"></path>
            <path id="theMotionPath3" d="M 500 50 L 500 200 L 500 300 L 500 500 L 500 700" stroke="grey" stroke-width="0" fill="none"></path>
            <path id="theMotionPath4" d="M 700 50 C 600,200 500,100 500,200 L 500 300 C 500,390 625,300 625,400 l 0,50" stroke="blue" stroke-width="0" fill="none"></path>
            <path id="theMotionPath5" d="M 900 50 C 900,200 500,50 500,200 L 500 300 C 500,450 825,220 825,400  l 0,50" stroke="green" stroke-width="0" fill="none"></path>
            <path id="theMotionPath6" d="M 500 50 L 500 600" stroke="white" stroke-width="0" fill="none"></path>

        </svg>
        <div id="replay"><img src="https://recyclotron.zhixing.dev/wp-content/uploads/2020/04/replay.png"></div>
    </div>

<script id="rendered-js">
        console.clear();
        function clog(s1) { console.log(s1); }

        var myFlags = [],
            tweens = [],
            ani_running = false;

        function completeFunc() {
            ani_running = false;
            clog("animation finished.")
        }

        function executeAnimationX(id) {
            let x = id[id.length-1],
                tl = new TimelineMax({onComplete:completeFunc}),
                target = "#dot"+x,
                path = "#theMotionPath"+x;

            let motionPath = MorphSVGPlugin.pathDataToBezier(path, {align:"relative"});
            return tl.to(target, 1, {bezier: {values: motionPath, type: "cubic"}});

        }

        $( document ).ready(function() {
            TweenLite.set(".center-origin", {xPercent: -50,yPercent: -50});

            $( ".ani-trash" ).each(function() {
                $(this).on("click", function(){
                    clog("Doing animation with "+this.id);
                    if ((ani_running) || (myFlags.includes(this.id))) {
                        clog("something executing.");
                        return;
                    } else {
                        ani_running = true;
                        myFlags.push(this.id);
                        tweens.push(executeAnimationX(this.id));
                    }
                });
            });

            $("#replay").on("click", function(){
                myFlags = [];
                ani_running = false;
                for (i = 0; i < tweens.length; i++) tweens[i].progress(0).pause();
                tweens = [];
            });

        });
        
    </script>
</div>